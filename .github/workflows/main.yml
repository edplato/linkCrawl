name: Secrets Check
  
on: [push]

jobs:
  security-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master
      - name: gitleaks-action
        uses: zricethezav/gitleaks@master
        with:
          run: |
            set -e
            set -u
            gitleaks -v --exclude-forks --redact --threads=1 \
              --branch=$GITHUB_REF \
              --repo-path=$GITHUB_WORKSPACE \
              --commit=$GITHUB_SHA \
